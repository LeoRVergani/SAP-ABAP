REPORT ZLRV_TELAS_02.

TABLES: SFLIGHT, SPFLI.

DATA LV_DYNNR TYPE DYNNR.

SELECTION-SCREEN BEGIN OF SCREEN 101 AS SUBSCREEN.
  SELECT-OPTIONS: S_CARRID FOR SFLIGHT-CARRID,
                  S_CONNID FOR SFLIGHT-CONNID,
                  S_FLDATE FOR SFLIGHT-FLDATE.

  SELECTION-SCREEN SKIP 1.

  PARAMETERS: P_USD RADIOBUTTON GROUP OPC,
              P_EUR RADIOBUTTON GROUP OPC,
              P_JYP RADIOBUTTON GROUP OPC,
              P_ALL RADIOBUTTON GROUP OPC DEFAULT 'X'.

  SELECTION-SCREEN END OF SCREEN 101.

  SELECTION-SCREEN BEGIN OF SCREEN 102 AS SUBSCREEN.
    SELECT-OPTIONS: P_CARRID FOR SPFLI-CARRID,
                    P_ARIRFR FOR SPFLI-AIRPFROM.

    SELECTION-SCREEN END OF SCREEN 102.

    SELECTION-SCREEN BEGIN OF TABBED BLOCK T1 FOR 08 LINES.
      SELECTION-SCREEN TAB (10) TAB1 USER-COMMAND USRCND1 DEFAULT SCREEN 101.
      SELECTION-SCREEN TAB (10) TAB2 USER-COMMAND USRCND2 DEFAULT SCREEN 102.
   SELECTION-SCREEN END OF BLOCK T1.

LV_DYNNR = T1-DYNNR.

   DATA: LT_SFLIGHT TYPE TABLE OF SFLIGHT,
         LT_SPFLI   TYPE TABLE OF SPFLI.

   INITIALIZATION.

   TAB1 = 'SFLIGHT'.
   TAB2 = 'SPFLI'.

   CASE LV_DYNNR.
   	WHEN '0101'.
      DATA R_TIPO TYPE RSELOPTION.

      IF P_USD EQ ABAP_TRUE.
        R_TIPO = VALUE RSELOPTION(
        ( SIGN = 'I' OPTION = 'EQ' LOW = 'USD' ) ).

        ELSEIF P_EUR EQ ABAP_TRUE.
        R_TIPO = VALUE RSELOPTION(
        ( SIGN = 'I' OPTION = 'EQ' LOW = 'EUR' ) ).

        ELSEIF P_JYP EQ ABAP_TRUE.
        R_TIPO = VALUE RSELOPTION(
        ( SIGN = 'I' OPTION = 'EQ' LOW = 'JYP' ) ).

        ELSEIF P_ALL EQ ABAP_TRUE.
          CLEAR R_TIPO.

      ENDIF.

      SELECT *
        FROM  SFLIGHT
        INTO TABLE LT_SFLIGHT
          WHERE CARRID    IN S_CARRID
            AND CONNID    IN S_CONNID
            AND FLDATE    IN S_FLDATE
            AND CURRENCY  IN R_TIPO.

     IF LT_SFLIGHT IS NOT INITIAL.
       LOOP AT LT_SFLIGHT INTO DATA(LS_SFLIGHT).
         WRITE: / |COMPANIA AEREA { LS_SFLIGHT-CARRID } CONEXAO { LS_SFLIGHT-CONNID } MOEDA { LS_SFLIGHT-CURRENCY }|.
         ULINE.
       ENDLOOP.

     ENDIF.

   	WHEN '0102'.

      SELECT *
        FROM  SPFLI
        INTO TABLE LT_SPFLI
        WHERE CARRID    IN p_CARRID
          AND AIRPFROM  IN P_ARIRFR.

        IF LT_SPFLI IS NOT INITIAL.
          LOOP AT LT_SPFLI INTO DATA(LS_SPFLI).
            WRITE: / |COMPANIA AREA { LS_SPFLI-CARRID } AIRPFROM { LS_SPFLI-AIRPFROM } HORA { LS_SPFLI-FLTIME }|.
            ULINE.
          ENDLOOP.
        ENDIF.

   	WHEN OTHERS.
   ENDCASE.